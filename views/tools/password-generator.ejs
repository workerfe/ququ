<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯†ç ç”Ÿæˆå™¨ - æ›²æ›²å·¥å…·</title>
    <link rel="stylesheet" href="/stylesheets/style.css">
    <script>
      var _hmt = _hmt || [];
      (function() {
        var hm = document.createElement("script");
        hm.src = "https://hm.baidu.com/hm.js?10d3246e4c5febb42eff37771756238e";
        var s = document.getElementsByTagName("script")[0];
        s.parentNode.insertBefore(hm, s);
      })();
    </script>
</head>
<body>
    <div class="tool-layout">
        <!-- å·¦ä¾§å¯¼èˆª -->
        <div class="sidebar">
            <div class="sidebar-header">
                <h1>æ›²æ›²å·¥å…·</h1>
                <p>ä¾¿æ·çš„åœ¨çº¿å·¥å…·ç½‘ç«™</p>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-category">
                    <h3>æ–‡æœ¬å¤„ç†å·¥å…·</h3>
                    <ul class="nav-links">
                        <li><a href="/json-formatter">JSON æ ¼å¼åŒ–</a></li>
                        <li><a href="/base64">Base64 ç¼–è§£ç </a></li>
                        <li><a href="/url-encode">URL ç¼–è§£ç </a></li>
                    </ul>
                </div>
                
                <div class="nav-category">
                    <h3>å¼€å‘å·¥å…·</h3>
                    <ul class="nav-links">
                        <li><a href="/color-picker">é¢œè‰²é€‰æ‹©å™¨</a></li>
                        <li><a href="/regex-test">æ­£åˆ™è¡¨è¾¾å¼æµ‹è¯•</a></li>
                        <li><a href="/hash-generator">Hash ç”Ÿæˆå™¨</a></li>
                    </ul>
                </div>
                
                <div class="nav-category">
                    <h3>ç”Ÿæ´»å·¥å…·</h3>
                    <ul class="nav-links">
                        <li><a href="/qr-code">äºŒç»´ç ç”Ÿæˆå™¨</a></li>
                        <li><a href="/timestamp">æ—¶é—´æˆ³è½¬æ¢</a></li>
                        <li><a href="/password-generator" class="active">å¯†ç ç”Ÿæˆå™¨</a></li>
                    </ul>
                </div>
                
                <div class="nav-category">
                    <h3>å…¶ä»–</h3>
                    <ul class="nav-links">
                        <li><a href="/">è¿”å›é¦–é¡µ</a></li>
                    </ul>
                </div>
            </nav>
        </div>

        <!-- å³ä¾§å†…å®¹åŒº -->
        <div class="tool-content">
            <div class="tool-header">
                <h1>å¯†ç ç”Ÿæˆå™¨</h1>
                <p>ç”Ÿæˆå®‰å…¨å¯é çš„éšæœºå¯†ç </p>
            </div>

            <div class="tool-main">
                <div class="tool-container">
                    <!-- å¯†ç è®¾ç½® -->
                    <div class="form-group">
                      <label for="passwordLength">å¯†ç é•¿åº¦ï¼š<span id="lengthValue">12</span></label>
                      <input type="range" id="passwordLength" min="4" max="128" value="12" oninput="updateLength()" style="width: 100%; margin-top: 0.5rem;">
                      <div style="display: flex; justify-content: space-between; font-size: 0.8rem; color: #718096; margin-top: 0.2rem;">
                        <span>4</span>
                        <span>128</span>
                      </div>
                    </div>

                    <!-- å­—ç¬¦ç±»å‹é€‰æ‹© -->
                    <div class="form-group">
                      <label>åŒ…å«å­—ç¬¦ç±»å‹ï¼š</label>
                      <div style="margin-top: 0.5rem; display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                        <label style="display: flex; align-items: center; font-weight: normal;">
                          <input type="checkbox" id="includeUppercase" checked style="margin-right: 0.5rem;"> å¤§å†™å­—æ¯ (A-Z)
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                          <input type="checkbox" id="includeLowercase" checked style="margin-right: 0.5rem;"> å°å†™å­—æ¯ (a-z)
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                          <input type="checkbox" id="includeNumbers" checked style="margin-right: 0.5rem;"> æ•°å­— (0-9)
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                          <input type="checkbox" id="includeSymbols" style="margin-right: 0.5rem;"> ç‰¹æ®Šç¬¦å· (!@#$%^&*)
                        </label>
                      </div>
                    </div>

                    <!-- é«˜çº§é€‰é¡¹ -->
                    <div class="form-group">
                      <label>é«˜çº§é€‰é¡¹ï¼š</label>
                      <div style="margin-top: 0.5rem; display: grid; grid-template-columns: 1fr 1fr; gap: 0.5rem;">
                        <label style="display: flex; align-items: center; font-weight: normal;">
                          <input type="checkbox" id="excludeSimilar" style="margin-right: 0.5rem;"> æ’é™¤ç›¸ä¼¼å­—ç¬¦ (0oO1lI)
                        </label>
                        <label style="display: flex; align-items: center; font-weight: normal;">
                          <input type="checkbox" id="excludeAmbiguous" style="margin-right: 0.5rem;"> æ’é™¤æ­§ä¹‰å­—ç¬¦ ({}[]())
                        </label>
                      </div>
                    </div>

                    <!-- è‡ªå®šä¹‰å­—ç¬¦ -->
                    <div class="form-group">
                      <label for="customChars">è‡ªå®šä¹‰å­—ç¬¦ï¼ˆå¯é€‰ï¼‰ï¼š</label>
                      <input type="text" id="customChars" class="form-control" placeholder="è¾“å…¥è‡ªå®šä¹‰å­—ç¬¦ï¼Œå°†æ·»åŠ åˆ°å¯†ç å­—ç¬¦é›†ä¸­">
                    </div>

                    <!-- ç”ŸæˆæŒ‰é’® -->
                    <div class="form-group">
                      <div style="display: flex; gap: 0.5rem; flex-wrap: wrap;">
                        <button onclick="generatePassword()" class="btn">ç”Ÿæˆå¯†ç </button>
                        <button onclick="generateMultiple()" class="btn btn-secondary">ç”Ÿæˆå¤šä¸ª</button>
                        <button onclick="clearAll()" class="btn btn-secondary">æ¸…ç©º</button>
                      </div>
                    </div>

                    <!-- ç”Ÿæˆçš„å¯†ç  -->
                    <div class="form-group">
                      <label for="generatedPassword">ç”Ÿæˆçš„å¯†ç ï¼š</label>
                      <div style="display: flex; gap: 0.5rem;">
                        <input type="text" id="generatedPassword" class="form-control" readonly>
                        <button onclick="copyPassword()" class="btn btn-secondary" style="white-space: nowrap;">å¤åˆ¶</button>
                        <button onclick="togglePasswordVisibility()" class="btn btn-secondary" id="toggleBtn" style="white-space: nowrap;">ğŸ‘ï¸</button>
                      </div>
                    </div>

                    <!-- å¯†ç å¼ºåº¦æŒ‡ç¤ºå™¨ -->
                    <div class="form-group">
                      <label>å¯†ç å¼ºåº¦ï¼š</label>
                      <div id="strengthIndicator" style="margin-top: 0.5rem;">
                        <div id="strengthBar" style="height: 8px; background: #e2e8f0; border-radius: 4px; overflow: hidden;">
                          <div id="strengthFill" style="height: 100%; width: 0%; transition: all 0.3s ease;"></div>
                        </div>
                        <div id="strengthText" style="margin-top: 0.3rem; font-size: 0.9rem;">è¯·ç”Ÿæˆå¯†ç </div>
                      </div>
                    </div>

                    <!-- å¤šä¸ªå¯†ç æ˜¾ç¤º -->
                    <div id="multiplePasswords" class="form-group" style="display: none;">
                      <label>ç”Ÿæˆçš„å¤šä¸ªå¯†ç ï¼š</label>
                      <div id="passwordList" style="margin-top: 0.5rem; max-height: 300px; overflow-y: auto; border: 1px solid #e2e8f0; border-radius: 4px; padding: 1rem;"></div>
                    </div>

                    <div id="result" class="result-area" style="display: none;"></div>
                    
                    <!-- å¯†ç å®‰å…¨æç¤º -->
                    <div class="result-area">
                      <h4>å¯†ç å®‰å…¨å»ºè®®ï¼š</h4>
                      <ul>
                        <li><strong>é•¿åº¦ï¼š</strong>å»ºè®®è‡³å°‘12ä½ï¼Œè¶Šé•¿è¶Šå®‰å…¨</li>
                        <li><strong>å¤æ‚æ€§ï¼š</strong>åŒ…å«å¤§å°å†™å­—æ¯ã€æ•°å­—å’Œç‰¹æ®Šç¬¦å·</li>
                        <li><strong>å”¯ä¸€æ€§ï¼š</strong>æ¯ä¸ªè´¦æˆ·ä½¿ç”¨ä¸åŒçš„å¯†ç </li>
                        <li><strong>å®šæœŸæ›´æ¢ï¼š</strong>é‡è¦è´¦æˆ·å¯†ç å®šæœŸæ›´æ–°</li>
                        <li><strong>å®‰å…¨å­˜å‚¨ï¼š</strong>ä½¿ç”¨å¯†ç ç®¡ç†å™¨å®‰å…¨ä¿å­˜</li>
                        <li><strong>é¿å…ï¼š</strong>ç”Ÿæ—¥ã€å§“åã€å¸¸ç”¨è¯æ±‡ç­‰ä¸ªäººä¿¡æ¯</li>
                      </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
      // å­—ç¬¦é›†å®šä¹‰
      const charSets = {
        uppercase: 'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
        lowercase: 'abcdefghijklmnopqrstuvwxyz',
        numbers: '0123456789',
        symbols: '!@#$%^&*()_+-=[]{}|;:,.<>?'
      };
      
      const similarChars = '0oO1lI';
      const ambiguousChars = '{}[]()'
      
      // æ›´æ–°é•¿åº¦æ˜¾ç¤º
      function updateLength() {
        const length = document.getElementById('passwordLength').value;
        document.getElementById('lengthValue').textContent = length;
      }
      
      // ç”Ÿæˆå¯†ç 
      function generatePassword() {
        try {
          const password = createPassword();
          if (!password) return;
          
          document.getElementById('generatedPassword').value = password;
          document.getElementById('generatedPassword').type = 'password';
          document.getElementById('toggleBtn').textContent = 'ğŸ‘ï¸';
          
          // è¯„ä¼°å¯†ç å¼ºåº¦
          evaluatePasswordStrength(password);
          
          showResult('âœ… å¯†ç ç”ŸæˆæˆåŠŸ', 'success');
        } catch (error) {
          showResult('âŒ ç”Ÿæˆå¤±è´¥: ' + error.message, 'error');
        }
      }
      
      // ç”Ÿæˆå¤šä¸ªå¯†ç 
      function generateMultiple() {
        try {
          const passwords = [];
          for (let i = 0; i < 10; i++) {
            const password = createPassword();
            if (password) passwords.push(password);
          }
          
          if (passwords.length === 0) return;
          
          const passwordList = document.getElementById('passwordList');
          passwordList.innerHTML = passwords.map((pwd, index) => 
            `<div style="display: flex; justify-content: space-between; align-items: center; padding: 0.5rem; border-bottom: 1px solid #e2e8f0; font-family: monospace;">
              <span style="flex: 1; word-break: break-all;">${pwd}</span>
              <button onclick="copyText('${pwd}')" class="btn btn-secondary" style="margin-left: 0.5rem; padding: 0.2rem 0.5rem; font-size: 0.8rem;">å¤åˆ¶</button>
            </div>`
          ).join('');
          
          document.getElementById('multiplePasswords').style.display = 'block';
          showResult('âœ… ç”Ÿæˆäº† ' + passwords.length + ' ä¸ªå¯†ç ', 'success');
        } catch (error) {
          showResult('âŒ ç”Ÿæˆå¤±è´¥: ' + error.message, 'error');
        }
      }
      
      // åˆ›å»ºå¯†ç æ ¸å¿ƒé€»è¾‘
      function createPassword() {
        const length = parseInt(document.getElementById('passwordLength').value);
        const includeUppercase = document.getElementById('includeUppercase').checked;
        const includeLowercase = document.getElementById('includeLowercase').checked;
        const includeNumbers = document.getElementById('includeNumbers').checked;
        const includeSymbols = document.getElementById('includeSymbols').checked;
        const excludeSimilar = document.getElementById('excludeSimilar').checked;
        const excludeAmbiguous = document.getElementById('excludeAmbiguous').checked;
        const customChars = document.getElementById('customChars').value;
        
        // æ£€æŸ¥è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹
        if (!includeUppercase && !includeLowercase && !includeNumbers && !includeSymbols && !customChars) {
          throw new Error('è¯·è‡³å°‘é€‰æ‹©ä¸€ç§å­—ç¬¦ç±»å‹');
        }
        
        // æ„å»ºå­—ç¬¦é›†
        let charset = '';
        if (includeUppercase) charset += charSets.uppercase;
        if (includeLowercase) charset += charSets.lowercase;
        if (includeNumbers) charset += charSets.numbers;
        if (includeSymbols) charset += charSets.symbols;
        if (customChars) charset += customChars;
        
        // æ’é™¤ç›¸ä¼¼å’Œæ­§ä¹‰å­—ç¬¦
        if (excludeSimilar) {
          charset = charset.split('').filter(char => !similarChars.includes(char)).join('');
        }
        if (excludeAmbiguous) {
          charset = charset.split('').filter(char => !ambiguousChars.includes(char)).join('');
        }
        
        if (charset.length === 0) {
          throw new Error('å¯ç”¨å­—ç¬¦é›†ä¸ºç©ºï¼Œè¯·è°ƒæ•´è®¾ç½®');
        }
        
        // ç”Ÿæˆå¯†ç 
        let password = '';
        for (let i = 0; i < length; i++) {
          const randomIndex = Math.floor(Math.random() * charset.length);
          password += charset[randomIndex];
        }
        
        return password;
      }
      
      // è¯„ä¼°å¯†ç å¼ºåº¦
      function evaluatePasswordStrength(password) {
        let score = 0;
        let feedback = [];
        
        // é•¿åº¦è¯„åˆ†
        if (password.length >= 12) score += 25;
        else if (password.length >= 8) score += 15;
        else score += 5;
        
        // å­—ç¬¦ç±»å‹è¯„åˆ†
        if (/[a-z]/.test(password)) score += 15;
        if (/[A-Z]/.test(password)) score += 15;
        if (/[0-9]/.test(password)) score += 15;
        if (/[^a-zA-Z0-9]/.test(password)) score += 20;
        
        // å¤æ‚æ€§è¯„åˆ†
        const uniqueChars = new Set(password).size;
        if (uniqueChars >= password.length * 0.8) score += 10;
        
        // ç¡®å®šå¼ºåº¦ç­‰çº§
        let strength, color, text;
        if (score >= 80) {
          strength = 'å¾ˆå¼º';
          color = '#38a169';
          text = 'å¯†ç å¼ºåº¦å¾ˆé«˜ï¼Œéå¸¸å®‰å…¨';
        } else if (score >= 60) {
          strength = 'å¼º';
          color = '#68d391';
          text = 'å¯†ç å¼ºåº¦è¾ƒé«˜ï¼Œæ¯”è¾ƒå®‰å…¨';
        } else if (score >= 40) {
          strength = 'ä¸­ç­‰';
          color = '#f6ad55';
          text = 'å¯†ç å¼ºåº¦ä¸­ç­‰ï¼Œå»ºè®®å¢åŠ å¤æ‚æ€§';
        } else if (score >= 20) {
          strength = 'å¼±';
          color = '#fc8181';
          text = 'å¯†ç å¼ºåº¦è¾ƒå¼±ï¼Œå»ºè®®é‡æ–°ç”Ÿæˆ';
        } else {
          strength = 'å¾ˆå¼±';
          color = '#e53e3e';
          text = 'å¯†ç å¼ºåº¦å¾ˆå¼±ï¼Œä¸å»ºè®®ä½¿ç”¨';
        }
        
        // æ›´æ–°UI
        const strengthFill = document.getElementById('strengthFill');
        const strengthText = document.getElementById('strengthText');
        
        strengthFill.style.width = score + '%';
        strengthFill.style.backgroundColor = color;
        strengthText.textContent = `${strength} (${score}/100) - ${text}`;
        strengthText.style.color = color;
      }
      
      // åˆ‡æ¢å¯†ç å¯è§æ€§
      function togglePasswordVisibility() {
        const passwordInput = document.getElementById('generatedPassword');
        const toggleBtn = document.getElementById('toggleBtn');
        
        if (passwordInput.type === 'password') {
          passwordInput.type = 'text';
          toggleBtn.textContent = 'ğŸ™ˆ';
        } else {
          passwordInput.type = 'password';
          toggleBtn.textContent = 'ğŸ‘ï¸';
        }
      }
      
      // å¤åˆ¶å¯†ç 
      function copyPassword() {
        const password = document.getElementById('generatedPassword').value;
        copyText(password, 'å¯†ç ');
      }
      
      // å¤åˆ¶æ–‡æœ¬é€šç”¨å‡½æ•°
      function copyText(text, type = 'å†…å®¹') {
        if (!text) {
          showResult('âŒ æ²¡æœ‰å¯å¤åˆ¶çš„' + type, 'error');
          return;
        }
        
        navigator.clipboard.writeText(text).then(() => {
          showResult(`âœ… å·²å¤åˆ¶${type}åˆ°å‰ªè´´æ¿`, 'success');
        }).catch(() => {
          showResult('âŒ å¤åˆ¶å¤±è´¥ï¼Œè¯·æ‰‹åŠ¨å¤åˆ¶', 'error');
        });
      }
      
      // æ¸…ç©ºæ‰€æœ‰
      function clearAll() {
        document.getElementById('generatedPassword').value = '';
        document.getElementById('customChars').value = '';
        document.getElementById('multiplePasswords').style.display = 'none';
        document.getElementById('result').style.display = 'none';
        
        // é‡ç½®å¼ºåº¦æŒ‡ç¤ºå™¨
        document.getElementById('strengthFill').style.width = '0%';
        document.getElementById('strengthText').textContent = 'è¯·ç”Ÿæˆå¯†ç ';
        document.getElementById('strengthText').style.color = '#718096';
      }
      
      function showResult(message, type) {
        const result = document.getElementById('result');
        result.textContent = message;
        result.style.display = 'block';
        result.style.color = type === 'success' ? '#38a169' : '#e53e3e';
        result.style.backgroundColor = type === 'success' ? '#f0fff4' : '#fed7d7';
        result.style.borderColor = type === 'success' ? '#9ae6b4' : '#feb2b2';
        
        setTimeout(() => {
          result.style.display = 'none';
        }, 3000);
      }
      
      // é¡µé¢åŠ è½½æ—¶ç”Ÿæˆä¸€ä¸ªé»˜è®¤å¯†ç 
      window.onload = function() {
        generatePassword();
      };
    </script>
  </body>
</html>